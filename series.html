<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Planet Kenangan — Orbit Edition</title>
  <meta name="description" content="Planet Kenangan: foto-foto kalian melayang mengelilingi planet pink. Ganti images/photo1.jpg..photo5.jpg dan audio/song.mp3 dengan file kamu." />
  <style>
    /* Minimal styles; all visuals generated by three.js */
    html,body{height:100%;margin:0;background:#000;overflow:hidden;color:#fff;font-family:Inter, Poppins, system-ui}
    .ui{position:absolute;right:18px;bottom:18px;z-index:6;display:flex;gap:10px}
    .btn{background:rgba(255,255,255,0.06);border:1px solid rgba(255,255,255,0.08);color:#fff;padding:8px 12px;border-radius:10px;backdrop-filter:blur(6px);cursor:pointer}
    .title{position:absolute;top:20px;width:100%;text-align:center;color:#ffd3f2;font-size:clamp(18px,3vw,36px);z-index:6;text-shadow:0 8px 30px rgba(255,120,200,0.08)}
    .hint{position:absolute;left:18px;bottom:18px;color:#ffb7ef;z-index:6;font-size:13px}
  </style>
</head>
<body>
  <div class="title">Planet Kenangan — Orbit Edition</div>
  <div class="hint">Pinch/Scroll to zoom • Drag to orbit • Tap music icon to play</div>

  <div class="ui">
    <button id="centerBtn" class="btn">Center</button>
    <button id="toggleAuto" class="btn">Toggle Auto</button>
    <button id="screenshot" class="btn">Screenshot</button>
    <button id="musicBtn" class="btn">Music</button>
  </div>

  <!-- background music (replace with your file at audio/song.mp3) -->
  <audio id="bgAudio" loop>
    <source src="audio/song.mp3" type="audio/mpeg">
  </audio>

  <!-- three.js from CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/examples/js/controls/OrbitControls.js"></script>

  <script>
  /*
    HOW TO USE:
    - Put your 5 photos in folder `images/` named: photo1.jpg .. photo5.jpg
    - Put your music in folder `audio/` named: song.mp3 (optional)
    - Upload full folder to GitHub Pages / Netlify / Vercel
    - This version uses medium-size sprites (balanced) orbiting the planet.
  */

  const CONFIG = {
    photos: [
      'Foto/img1.jpeg',
      'Foto/img2.jpeg',
      'Foto/img3.jpeg',
      'Foto/img4.jpeg',
      'Foto/img5.jpeg'
    ],
    spriteScale: 4.0, // medium size
    orbitRadius: 18,
    orbitSpeed: 0.6, // radians per 60s-ish
    planetColor: 0xff77cc,
    planetRadius: 6
  };

  // SCENE
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(55, innerWidth/innerHeight, 0.1, 2000);
  camera.position.set(0, 10, 36);

  const renderer = new THREE.WebGLRenderer({antialias:true});
  renderer.setSize(innerWidth, innerHeight);
  renderer.setPixelRatio(Math.min(devicePixelRatio,2));
  document.body.appendChild(renderer.domElement);

  // CONTROLS
  const controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;
  controls.autoRotate = true;
  controls.autoRotateSpeed = 0.8;
  controls.minDistance = 8;
  controls.maxDistance = 120;

  // LIGHTS
  scene.add(new THREE.AmbientLight(0xffffff, 0.25));
  const sun = new THREE.PointLight(0xffc0e6, 1.8, 200);
  sun.position.set(30,40,10);
  scene.add(sun);

  // PLANET
  const planetMat = new THREE.MeshStandardMaterial({color:CONFIG.planetColor, emissive:0x331122, roughness:0.35});
  const planet = new THREE.Mesh(new THREE.SphereGeometry(CONFIG.planetRadius, 64, 64), planetMat);
  planet.position.y = -6;
  scene.add(planet);

  // soft atmosphere glow
  const glow = new THREE.Mesh(new THREE.SphereGeometry(CONFIG.planetRadius*1.06,32,32), new THREE.MeshBasicMaterial({color:CONFIG.planetColor, transparent:true, opacity:0.06}));
  glow.position.copy(planet.position);
  scene.add(glow);

  // STARS
  const starsGeo = new THREE.BufferGeometry();
  const starCount = 12000;
  const starPos = new Float32Array(starCount*3);
  for(let i=0;i<starCount;i++){
    starPos[i*3] = (Math.random()-0.5)*400;
    starPos[i*3+1] = (Math.random()-0.5)*200;
    starPos[i*3+2] = (Math.random()-0.5)*400;
  }
  starsGeo.setAttribute('position', new THREE.BufferAttribute(starPos,3));
  const stars = new THREE.Points(starsGeo, new THREE.PointsMaterial({size:0.35, color:0xffa6df, transparent:true, opacity:0.9}));
  scene.add(stars);

  // DUST LAYER (band near horizon)
  const dustGeo = new THREE.BufferGeometry();
  const dustCount = 3000;
  const dustPos = new Float32Array(dustCount*3);
  for(let i=0;i<dustCount;i++){
    dustPos[i*3] = (Math.random()-0.5)*280;
    dustPos[i*3+1] = -6 + Math.random()*6;
    dustPos[i*3+2] = (Math.random()-0.5)*280;
  }
  dustGeo.setAttribute('position', new THREE.BufferAttribute(dustPos,3));
  const dust = new THREE.Points(dustGeo, new THREE.PointsMaterial({size:0.6, color:0xff8fcf, transparent:true, opacity:0.75}));
  scene.add(dust);

  // PHOTO SPRITES ORBIT
  const loader = new THREE.TextureLoader();
  const sprites = [];
  const thetaOffsets = [];

  CONFIG.photos.forEach((p,i)=>{
    const tex = loader.load(p, ()=>{/* loaded */}, undefined, (err)=>{ console.warn('Failed to load',p,err); });
    tex.encoding = THREE.sRGBEncoding;
    const mat = new THREE.SpriteMaterial({map:tex});
    const s = new THREE.Sprite(mat);
    s.scale.set(CONFIG.spriteScale, CONFIG.spriteScale, 1);
    // initial angle offset
    thetaOffsets.push(Math.random()*Math.PI*2);
    sprites.push(s);
    scene.add(s);
  });

  // helper to position sprites in orbit (with slight inclination)
  function updateSpritePositions(t){
    sprites.forEach((s,i)=>{
      const baseTheta = t*CONFIG.orbitSpeed*0.2 + thetaOffsets[i]; // slower base
      const radius = CONFIG.orbitRadius + (Math.sin(t*0.3 + i)*2.5);
      const inclin = (i%2===0)?0.25:-0.18; // alternate inclinations
      const x = Math.cos(baseTheta) * radius;
      const y = inclin*6 + Math.sin(baseTheta*0.7 + i)*1.6;
      const z = Math.sin(baseTheta) * radius;
      s.position.set(x, y-2, z);
      // always face camera (sprite does that), add subtle rotation via material.rotation
      if(s.material) s.material.rotation = Math.sin(t*0.6 + i)*0.25;
    });
  }

  // animate
  const clock = new THREE.Clock();
  function animate(){
    requestAnimationFrame(animate);
    const t = clock.getElapsedTime();
    planet.rotation.y += 0.0025;
    glow.rotation.y = planet.rotation.y*0.99;
    stars.rotation.y = t*0.0012;
    dust.rotation.y = t*0.003;

    updateSpritePositions(t);

    controls.update();
    renderer.render(scene, camera);
  }
  animate();

  // UI interactions
  document.getElementById('centerBtn').addEventListener('click',()=>{ camera.position.set(0,10,36); controls.target.set(0,-2,0); });
  document.getElementById('toggleAuto').addEventListener('click',()=>{ controls.autoRotate = !controls.autoRotate; document.getElementById('toggleAuto').textContent = controls.autoRotate? 'Auto: ON':'Auto: OFF'; });
  document.getElementById('screenshot').addEventListener('click',()=>{ renderer.domElement.toBlob(b=>{ const a=document.createElement('a'); a.href=URL.createObjectURL(b); a.download='planet-kenangan.png'; a.click(); }); });

  const audio = document.getElementById('bgAudio');
  document.getElementById('musicBtn').addEventListener('click',()=>{ if(audio.paused) audio.play(); else audio.pause(); });

  // responsive
  window.addEventListener('resize',()=>{ camera.aspect = innerWidth/innerHeight; camera.updateProjectionMatrix(); renderer.setSize(innerWidth,innerHeight); });

  // NOTES: if any photo fails to load, check console network tab for 404s and ensure files exist.
  </script>
</body>
</html>
